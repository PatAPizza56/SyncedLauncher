<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="icon" type="image/png" href="/static/icons/favicon.ico" />
    <link rel="preload" href="/static/css/web.css" as="style" />
    <link rel="preload" href="/static/css/global.css" as="style" />
    <link rel="stylesheet" href="/static/css/web.css" />
    <link rel="stylesheet" href="/static/css/global.css" />

    <title>Synced Studios</title>
  </head>

  <body class="bcol-g5">
    <div id="root" class="flx flx-1 flx-dir-col hgt-100 mar-bot-lge">
      <div>
        <div
          class="
            flx flx-1 flx-dir-row flx-aln-ctr flx-jfy-btwn
            hgt-xlge
            pad-hor-xlge
            bcol-g5
          "
        >
          <a id="logoBtn" href="/home">
            <svg width="46" height="26" viewBox="0 0 46 26" class="fcol-clr">
              <path
                stroke-width="4"
                d="M23 13L13 23L3 13L13 3L23 13ZM23 13L33 3L43 13L33 23L23 13Z"
                class="scol-a2"
              />
            </svg>
          </a>

          <div class="flx flx-1 flx-dir-row flx-aln-ctr flx-jfy-end">
            <a
              id="homeBtn"
              href="/home"
              class="flx flx-aln-ctr flx-jfy-ctr wth-xlge hgt-lge col-g2"
            >
              <p>Home</p>
            </a>
            <a
              id="shopBtn"
              href="/shop"
              class="flx flx-aln-ctr flx-jfy-ctr wth-xlge hgt-lge col-g2"
            >
              <p>Shop</p>
            </a>
            <a
              id="gamesBtn"
              href="/games"
              class="flx flx-aln-ctr flx-jfy-ctr wth-xlge hgt-lge col-g2"
            >
              <p>Games</p>
            </a>
          </div>
        </div>
      </div>
      <div class="flx flx-1 flx-dir-col pad-hor-xlge">
        <div>
          <img
            id="bannerImg"
            width="100%"
            style="object-fit: cover"
            class="bor-rad-br2 hgt-xxxlge"
          />
          <div class="flx flx-1 flx-dir-row flx-aln-ctr flx-jfy-btwn pad-sml">
            <div class="hgt-lge">
              <h4 id="title" class="col-g1"></h4>
              <small id="publisher" class="col-g2"></small>
            </div>
            <a
              id="purchaseBtn"
              href="/games"
              class="
                flx flx-dir-col flx-aln-ctr flx-jfy-ctr
                wth-xxlge
                hgt-lge
                bor-rad-br1
                bcol-a2
              "
            >
              <p class="col-g1"><b>Purchase</b></p>
              <small id="price" class="col-g1"></small>
            </a>
          </div>
        </div>
      </div>

      <div class="flx flx-1 flx-dir-row pad-hor-xlge">
        <div>
          <div
            class="
              flx flx-dir-col
              wth-xxxlge
              mar-top-lge
              flx-jfy-ctr
              bor-rad-br2 bor-col-g3
              bcol-g4
            "
            style="border-width: 0.125rem; border-style: solid"
          >
            <div class="flx flx-aln-ctr mar-lft-sml hgt-lge">
              <p class="col-g1"><b>Information</b></p>
            </div>
            <div class="wth-100 bcol-g3" style="height: 0.063rem"></div>
            <div class="flx flx-1 flx-aln-ctr">
              <p id="description" class="pad-sml col-g2"></p>
            </div>
          </div>
          <div
            class="
              flx flx-dir-col
              wth-xxxlge
              mar-top-sml
              flx-jfy-ctr
              bor-rad-br2 bor-col-g3
              bcol-g4
            "
            style="border-width: 0.125rem; border-style: solid"
          >
            <div class="flx flx-aln-ctr mar-lft-sml hgt-lge">
              <p class="col-g1"><b>Statistics</b></p>
            </div>
            <div class="wth-100 bcol-g3" style="height: 0.063rem"></div>
            <div class="flx flx-1 flx-aln-ctr">
              <p class="pad-sml col-g2">
                Downloads: Coming soon... <br />
                Rating: Coming soon... <br />
                Version: Coming soon...
              </p>
            </div>
          </div>
        </div>
        <div class="flx flx-1 pad-lft-xlge">
          <h3 class="col-g2">Posts coming soon...</h3>
        </div>
      </div>
    </div>

    <script>
      window.onload = function () {
        title = window.location.pathname.split("/")[2].replaceAll("_", "%20");

        fetch("https://api.syncedstudios.com/games/" + title + "?method=title")
          .then((response) => {
            return response.json();
          })
          .then((gameData) => {
            fetch("https://api.syncedstudios.com/users/1?method=id")
              .then((response) => {
                return response.json();
              })
              .then((userData) => {
                document.getElementById("publisher").textContent =
                  userData.Username;
              })
              .catch((err) => {
                console.log(err);
              });
            document.getElementById("bannerImg").src = gameData.BannerURL;
            document.getElementById("title").textContent = gameData.Title;
            document.getElementById("price").textContent = gameData.Price;
            document.getElementById("description").textContent =
              gameData.Description;
            document.title = gameData.Title;
          })
          .catch((err) => {
            console.log(err);
          });
      };

      logoBtn = document.getElementById("logoBtn");
      homeBtn = document.getElementById("homeBtn");
      shopBtn = document.getElementById("shopBtn");
      gamesBtn = document.getElementById("gamesBtn");
      purchaseBtn = document.getElementById("purchaseBtn");

      hover(
        logoBtn,
        () =>
          addRemoveClass(logoBtn.children[0].children[0], "scol-a1", "scol-a2"),
        () =>
          addRemoveClass(logoBtn.children[0].children[0], "scol-a2", "scol-a1")
      );
      hover(
        homeBtn,
        () => addRemoveClass(homeBtn, "col-g1", "col-g2"),
        () => addRemoveClass(homeBtn, "col-g2", "col-g1")
      );
      hover(
        shopBtn,
        () => addRemoveClass(shopBtn, "col-g1", "col-g2"),
        () => addRemoveClass(shopBtn, "col-g2", "col-g1")
      );
      hover(
        gamesBtn,
        () => addRemoveClass(gamesBtn, "col-g1", "col-g2"),
        () => addRemoveClass(gamesBtn, "col-g2", "col-g1")
      );
      hover(
        purchaseBtn,
        () => addRemoveClass(purchaseBtn, "bcol-a1", "bcol-a2"),
        () => addRemoveClass(purchaseBtn, "bcol-a2", "bcol-a1")
      );

      function hover(element, enter, leave) {
        element.onmouseenter = enter;
        element.onmouseleave = leave;
      }

      function addClass(element, newClass) {
        element.classList.add(newClass);
      }

      function removeClass(element, usedClass) {
        element.classList.remove(usedClass);
      }

      function addRemoveClass(element, newClass, usedClass) {
        element.classList.add(newClass);
        element.classList.remove(usedClass);
      }
    </script>
  </body>
</html>
